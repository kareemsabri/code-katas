CODE KATA - ANAGRAMS

http://codekata.pragprog.com/2007/01/kata_six_anagra.html

|-----------------------------------------------------------------------------------------------------------------------------------------------------------|

A while back we had a thread on the Ruby mailing list about finding anagrams, and I’d like to resurrect it here. The challenge is fairly simple: given a file containing one word per line, print out all the combinations of words that are anagrams; each line in the output contains all the words from the input that are anagrams of each other. For example, your program might include in its output:

  kinship pinkish
  enlist inlets listen silent
  boaster boaters borates
  fresher refresh
  sinks skins
  knits stink
  rots sort

Kata Objectives

Apart from having some fun with words, this kata should make you think somewhat about algorithms. The simplest algorithms to find all the anagram combinations may take inordinate amounts of time to do the job. Working though alternatives should help bring the time down by orders of magnitude. To give you a possible point of comparison, I hacked a solution together in 25 lines of Ruby. It runs on the word list from my web site in 1.5s on a 1GHz PPC. It’s also an interesting exercise in testing: can you write unit tests to verify that your code is working correctly before setting it to work on the full dictionary.  

|-----------------------------------------------------------------------------------------------------------------------------------------------------------|

This one was a doozy to get it to run fast. Final solution:

Create a hash table with keys generated by a guaranteed unique hash function (map each letter of word to a prime number, and compute the product of all the primes). Collision resolution by chaining for anagrams (words with same key before modulus) and linear probing for non-anagrams.

This is an O(n) solution (assuming hash table is optimized for load factor, sufficiently random hashing etc., a well-defined problem).

NOTES:

Solution is case-insensitive. KLAXON, KlAxoN, and klaxon are all considered to be anagrams.

DEPENDENCIES:

Main function to test the solution assumes you are on a UNIX system and have a dictionary file located in /usr/share/dict/words. If you do not, alter the file specification to supply your own dictionary file. Dictionary file should contain only [A-Za-z].